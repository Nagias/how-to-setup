import{E as Ue,u as Pe,i as qe,a as ze,b as Ge,c as Oe,T as Ve,d as _e,e as Qe,f as We,g as Ye,h as Xe,j as e,k as De}from"./vendor-tiptap-CPIgDqZu.js";import{r as N,R as Ze,f as Je,u as et}from"./vendor-react-BadUDqtX.js";import{u as tt}from"./index-C0aebke8.js";import{v as H}from"./slugify-BrmacSpC.js";import{u as $e}from"./cloudinary-CNrMDq67.js";import"./vendor-firebase-D65FIcPE.js";const K={title:"",slug:"",canonicalUrl:"",redirectsFrom:[],noIndex:!1,seo:{seoTitle:"",metaDescription:"",ogTitle:"",ogDescription:"",ogImage:""},keywords:{primaryKeyword:"",secondaryKeywords:[],lsiKeywords:[]},searchIntent:"informational",content:null,contentHtml:"",excerpt:"",images:[],author:null,references:[],schema:{enableArticleSchema:!0,enableFaqSchema:!1,enableReviewSchema:!1,reviewData:null},category:"HÆ°á»›ng Dáº«n",tags:[],readTime:5,coverImage:"",status:"draft",views:0},Ee={informational:{label:"ThÃ´ng tin (Informational)",description:"NgÆ°á»i dÃ¹ng muá»‘n tÃ¬m hiá»ƒu, há»c há»i",suggestedCTA:"Äá»c thÃªm, TÃ¬m hiá»ƒu thÃªm",suggestedStructure:["Giá»›i thiá»‡u","CÃ¡c pháº§n chi tiáº¿t","Káº¿t luáº­n"]},navigational:{label:"Äiá»u hÆ°á»›ng (Navigational)",description:"NgÆ°á»i dÃ¹ng muá»‘n tÃ¬m trang/nguá»“n cá»¥ thá»ƒ",suggestedCTA:"Truy cáº­p, Äáº¿n trang",suggestedStructure:["ThÃ´ng tin nhanh","Link trá»±c tiáº¿p"]},transactional:{label:"Giao dá»‹ch (Transactional)",description:"NgÆ°á»i dÃ¹ng muá»‘n mua/Ä‘Äƒng kÃ½",suggestedCTA:"Mua ngay, ÄÄƒng kÃ½, ThÃªm vÃ o giá»",suggestedStructure:["Lá»£i Ã­ch","TÃ­nh nÄƒng","GiÃ¡","CTA"]},commercial:{label:"ThÆ°Æ¡ng máº¡i (Commercial Investigation)",description:"NgÆ°á»i dÃ¹ng so sÃ¡nh trÆ°á»›c khi mua",suggestedCTA:"So sÃ¡nh, Xem Ä‘Ã¡nh giÃ¡",suggestedStructure:["Tá»•ng quan","So sÃ¡nh","Æ¯u/NhÆ°á»£c Ä‘iá»ƒm","Káº¿t luáº­n"]}},st=Ue.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>{var n;return(n=t.style.fontSize)==null?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:n})=>n().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),nt=[{label:"Nhá»",value:"12px"},{label:"BÃ¬nh thÆ°á»ng",value:"16px"},{label:"Trung bÃ¬nh",value:"18px"},{label:"Lá»›n",value:"20px"},{label:"Ráº¥t lá»›n",value:"24px"},{label:"TiÃªu Ä‘á»",value:"28px"},{label:"TiÃªu Ä‘á» lá»›n",value:"32px"}],it=qe.configure({heading:{levels:[2,3,4]}}),lt=({content:t,onUpdate:n,onImageAdd:c,placeholder:o="Báº¯t Ä‘áº§u viáº¿t bÃ i táº¡i Ä‘Ã¢y...",primaryKeyword:r=""})=>{const i=Pe({extensions:[it,ze.configure({HTMLAttributes:{class:"blog-image"}}),Ge.configure({openOnClick:!1,HTMLAttributes:{class:"blog-link",target:"_blank",rel:"noopener noreferrer"}}),Oe.configure({placeholder:o}),Ve.configure({resizable:!0}),_e,Qe,We,Ye.configure({controls:!0,nocookie:!0,allowFullscreen:!0,HTMLAttributes:{class:"blog-video"}}),Xe,st],content:t||"",onUpdate:({editor:l})=>{const x=l.getJSON(),u=l.getHTML();n({json:x,html:u})}});N.useEffect(()=>{if(i&&t&&typeof t=="object"){const l=i.getJSON();JSON.stringify(l)!==JSON.stringify(t)&&i.commands.setContent(t)}},[t,i]);const p=N.useCallback((l,x="")=>{i&&(i.chain().focus().setImage({src:l,alt:x}).run(),c&&c({url:l,alt:x}))},[i,c]),s=N.useCallback(()=>{const l=prompt("Nháº­p URL:");l&&i&&i.chain().focus().extendMarkRange("link").setLink({href:l}).run()},[i]),h=N.useCallback(()=>{i&&i.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},[i]),m=N.useCallback(()=>{const l=prompt("Nháº­p URL YouTube hoáº·c Vimeo:");if(l&&i){const x=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;l.match(x)?i.commands.setYoutubeVideo({src:l,width:640,height:360}):alert("URL YouTube khÃ´ng há»£p lá»‡. Vui lÃ²ng sá»­ dá»¥ng link YouTube.")}},[i]),b=N.useCallback(()=>{const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async x=>{const u=x.target.files[0];if(u)try{const v=r?`Äá» xuáº¥t: "${r}"

`:"",j=prompt(`${v}Nháº­p Alt text cho áº£nh (báº¯t buá»™c cho SEO):`)||"",f=await $e(u,"blog-content");p(f.url,j)}catch(v){console.error("Image upload failed:",v),alert("Táº£i áº£nh tháº¥t báº¡i: "+v.message)}},l.click()},[p]);return i?e.jsxs("div",{className:"tiptap-editor-wrapper",children:[e.jsxs("div",{className:"tiptap-toolbar",children:[e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleHeading({level:2}).run(),className:`toolbar-btn ${i.isActive("heading",{level:2})?"active":""}`,title:"Heading 2",children:"H2"}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleHeading({level:3}).run(),className:`toolbar-btn ${i.isActive("heading",{level:3})?"active":""}`,title:"Heading 3",children:"H3"}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleHeading({level:4}).run(),className:`toolbar-btn ${i.isActive("heading",{level:4})?"active":""}`,title:"Heading 4",children:"H4"})]}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleBold().run(),className:`toolbar-btn ${i.isActive("bold")?"active":""}`,title:"In Ä‘áº­m",children:e.jsx("strong",{children:"B"})}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleItalic().run(),className:`toolbar-btn ${i.isActive("italic")?"active":""}`,title:"In nghiÃªng",children:e.jsx("em",{children:"I"})}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleStrike().run(),className:`toolbar-btn ${i.isActive("strike")?"active":""}`,title:"Gáº¡ch ngang",children:e.jsx("s",{children:"S"})})]}),e.jsx("div",{className:"toolbar-group",children:e.jsxs("select",{className:"toolbar-select",onChange:l=>{const x=l.target.value;x?i.chain().focus().setFontSize(x).run():i.chain().focus().unsetFontSize().run()},value:i.getAttributes("textStyle").fontSize||"",title:"KÃ­ch cá»¡ chá»¯",children:[e.jsx("option",{value:"",children:"Cá»¡ chá»¯"}),nt.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleBulletList().run(),className:`toolbar-btn ${i.isActive("bulletList")?"active":""}`,title:"Danh sÃ¡ch",children:"â€¢ List"}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleOrderedList().run(),className:`toolbar-btn ${i.isActive("orderedList")?"active":""}`,title:"Danh sÃ¡ch sá»‘",children:"1. List"})]}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{type:"button",onClick:()=>i.chain().focus().toggleBlockquote().run(),className:`toolbar-btn ${i.isActive("blockquote")?"active":""}`,title:"TrÃ­ch dáº«n",children:'" Quote'}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().setHorizontalRule().run(),className:"toolbar-btn",title:"ÄÆ°á»ng káº» ngang",children:"â”€"})]}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{type:"button",onClick:b,className:"toolbar-btn",title:"ChÃ¨n áº£nh",children:"ğŸ“· áº¢nh"}),e.jsx("button",{type:"button",onClick:m,className:"toolbar-btn",title:"ChÃ¨n video YouTube",children:"ğŸ¬ Video"}),e.jsx("button",{type:"button",onClick:s,className:`toolbar-btn ${i.isActive("link")?"active":""}`,title:"ChÃ¨n link",children:"ğŸ”— Link"}),e.jsx("button",{type:"button",onClick:h,className:"toolbar-btn",title:"ChÃ¨n báº£ng",children:"ğŸ“Š Báº£ng"})]}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{type:"button",onClick:()=>i.chain().focus().undo().run(),disabled:!i.can().undo(),className:"toolbar-btn",title:"HoÃ n tÃ¡c",children:"â†©"}),e.jsx("button",{type:"button",onClick:()=>i.chain().focus().redo().run(),disabled:!i.can().redo(),className:"toolbar-btn",title:"LÃ m láº¡i",children:"â†ª"})]})]}),e.jsx(De,{editor:i,className:"tiptap-content"})]}):e.jsx("div",{className:"tiptap-loading",children:"Äang táº£i editor..."})},at=N.forwardRef(({seoData:t,onChange:n,content:c,keywords:o,onKeywordsChange:r,searchIntent:i,onIntentChange:p},s)=>{var v,j;const[h,m]=Ze.useState("keywords");N.useImperativeHandle(s,()=>({switchToTab:f=>{m(f);const g=document.querySelector(".seo-panel");g&&g.scrollIntoView({behavior:"smooth",block:"start"})},focusField:f=>{setTimeout(()=>{const g=document.querySelector(`#seo-field-${f}`);g&&(g.focus(),g.scrollIntoView({behavior:"smooth",block:"center"}))},100)}}));const b=[{id:"keywords",label:"Keywords",icon:"ğŸ”‘"},{id:"social",label:"Social",icon:"ğŸ“±"},{id:"intent",label:"Intent",icon:"ğŸ¯"}],l=((v=t==null?void 0:t.seoTitle)==null?void 0:v.length)||0,x=((j=t==null?void 0:t.metaDescription)==null?void 0:j.length)||0,u=(o==null?void 0:o.primaryKeyword)&&o.primaryKeyword.trim()!=="";return e.jsxs("div",{className:"seo-panel",children:[e.jsx("div",{className:"seo-panel-header",children:e.jsx("h3",{children:"âš™ï¸ SEO Settings"})}),e.jsxs("div",{className:"seo-essential-fields",children:[e.jsxs("div",{className:"essential-field-header",children:[e.jsx("span",{className:"essential-icon",children:"ğŸ¯"}),e.jsx("span",{children:"CÃ¡c trÆ°á»ng báº¯t buá»™c"})]}),e.jsxs("div",{className:"seo-field",children:[e.jsxs("label",{htmlFor:"seo-field-seoTitle",children:["SEO Title ",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:`char-counter ${l===0?"empty":l<30?"short":l>60?"long":"good"}`,children:[l,"/60"]})]}),e.jsx("input",{id:"seo-field-seoTitle",type:"text",value:(t==null?void 0:t.seoTitle)||"",onChange:f=>n({...t,seoTitle:f.target.value}),placeholder:"Nháº­p tiÃªu Ä‘á» SEO (30-60 kÃ½ tá»±)",className:"seo-input",maxLength:70}),l<30&&l>0&&e.jsx("div",{className:"seo-hint warning",children:"âš ï¸ Cáº§n tá»‘i thiá»ƒu 30 kÃ½ tá»±"})]}),e.jsxs("div",{className:"seo-field",children:[e.jsxs("label",{htmlFor:"seo-field-metaDescription",children:["Meta Description ",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:`char-counter ${x===0?"empty":x<120?"short":x>155?"long":"good"}`,children:[x,"/155"]})]}),e.jsx("textarea",{id:"seo-field-metaDescription",value:(t==null?void 0:t.metaDescription)||"",onChange:f=>n({...t,metaDescription:f.target.value}),placeholder:"Nháº­p mÃ´ táº£ SEO (120-155 kÃ½ tá»±)",className:"seo-input",rows:3,maxLength:160}),x<120&&x>0&&e.jsx("div",{className:"seo-hint warning",children:"âš ï¸ Cáº§n tá»‘i thiá»ƒu 120 kÃ½ tá»±"})]}),e.jsxs("div",{className:"seo-field",children:[e.jsxs("label",{htmlFor:"seo-field-primaryKeyword",children:["Primary Keyword ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{id:"seo-field-primaryKeyword",type:"text",value:(o==null?void 0:o.primaryKeyword)||"",onChange:f=>r({...o,primaryKeyword:f.target.value}),placeholder:"Tá»« khÃ³a chÃ­nh báº¡n muá»‘n rank trÃªn Google",className:"seo-input primary-keyword-input"}),!u&&e.jsx("div",{className:"seo-hint error",children:"âŒ Báº¯t buá»™c nháº­p Primary Keyword"})]})]}),e.jsxs("div",{className:"seo-advanced-section",children:[e.jsx("div",{className:"advanced-header",children:e.jsx("span",{children:"CÃ i Ä‘áº·t nÃ¢ng cao"})}),e.jsx("div",{className:"seo-tabs",children:b.map(f=>e.jsxs("button",{type:"button",className:`seo-tab ${h===f.id?"active":""}`,onClick:()=>m(f.id),children:[e.jsx("span",{className:"tab-icon",children:f.icon}),e.jsx("span",{className:"tab-label",children:f.label})]},f.id))}),e.jsxs("div",{className:"seo-tab-content",children:[h==="keywords"&&e.jsx(ct,{keywords:o,onChange:r,content:c}),h==="social"&&e.jsx(rt,{seoData:t,onChange:n}),h==="intent"&&e.jsx(ot,{searchIntent:i,onChange:p})]})]})]})}),ct=({keywords:t,onChange:n,content:c})=>{var s,h;const o=()=>{const m=prompt("Nháº­p secondary keyword:");m&&!t.secondaryKeywords.includes(m.trim())&&n({...t,secondaryKeywords:[...t.secondaryKeywords,m.trim()]})},r=m=>{n({...t,secondaryKeywords:t.secondaryKeywords.filter((b,l)=>l!==m)})},i=()=>{const m=prompt("Nháº­p LSI/semantic keyword:");m&&!t.lsiKeywords.includes(m.trim())&&n({...t,lsiKeywords:[...t.lsiKeywords,m.trim()]})},p=m=>{n({...t,lsiKeywords:t.lsiKeywords.filter((b,l)=>l!==m)})};return e.jsxs("div",{className:"seo-keywords-tab",children:[e.jsxs("div",{className:"seo-field",children:[e.jsxs("label",{children:["Primary Keyword ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{id:"seo-field-primaryKeyword",type:"text",value:t.primaryKeyword||"",onChange:m=>n({...t,primaryKeyword:m.target.value}),placeholder:"Tá»« khÃ³a chÃ­nh báº¡n muá»‘n rank",className:"seo-input primary-keyword-input"}),!t.primaryKeyword&&e.jsx("div",{className:"seo-hint error",children:"âŒ Báº¯t buá»™c cÃ³ primary keyword"})]}),e.jsxs("div",{className:"seo-field",children:[e.jsx("label",{children:"Secondary Keywords"}),e.jsxs("div",{className:"keyword-tags",children:[(s=t.secondaryKeywords)==null?void 0:s.map((m,b)=>e.jsxs("span",{className:"keyword-tag",children:[m,e.jsx("button",{type:"button",onClick:()=>r(b),children:"Ã—"})]},b)),e.jsx("button",{type:"button",className:"add-keyword-btn",onClick:o,children:"+ ThÃªm"})]})]}),e.jsxs("div",{className:"seo-field",children:[e.jsx("label",{children:"LSI / Semantic Keywords"}),e.jsxs("div",{className:"keyword-tags",children:[(h=t.lsiKeywords)==null?void 0:h.map((m,b)=>e.jsxs("span",{className:"keyword-tag lsi",children:[m,e.jsx("button",{type:"button",onClick:()=>p(b),children:"Ã—"})]},b)),e.jsx("button",{type:"button",className:"add-keyword-btn",onClick:i,children:"+ ThÃªm"})]})]})]})},rt=({seoData:t,onChange:n})=>e.jsxs("div",{className:"seo-social-tab",children:[e.jsxs("div",{className:"seo-field",children:[e.jsx("label",{children:"OG Title"}),e.jsx("input",{type:"text",value:t.ogTitle||"",onChange:c=>n({...t,ogTitle:c.target.value}),placeholder:"TiÃªu Ä‘á» khi chia sáº» (Ä‘á»ƒ trá»‘ng = dÃ¹ng SEO Title)",className:"seo-input"})]}),e.jsxs("div",{className:"seo-field",children:[e.jsx("label",{children:"OG Description"}),e.jsx("textarea",{value:t.ogDescription||"",onChange:c=>n({...t,ogDescription:c.target.value}),placeholder:"MÃ´ táº£ khi chia sáº» (Ä‘á»ƒ trá»‘ng = dÃ¹ng Meta Description)",className:"seo-input",rows:2})]}),e.jsxs("div",{className:"seo-field",children:[e.jsx("label",{children:"OG Image URL"}),e.jsx("input",{type:"url",value:t.ogImage||"",onChange:c=>n({...t,ogImage:c.target.value}),placeholder:"https://example.com/image.jpg",className:"seo-input"})]}),e.jsxs("div",{className:"social-preview",children:[e.jsx("h4",{children:"Facebook Preview"}),e.jsxs("div",{className:"fb-card",children:[e.jsx("div",{className:"fb-image",children:t.ogImage?e.jsx("img",{src:t.ogImage,alt:"OG Preview"}):e.jsx("div",{className:"fb-image-placeholder",children:"ChÆ°a cÃ³ áº£nh"})}),e.jsxs("div",{className:"fb-content",children:[e.jsx("div",{className:"fb-domain",children:"deskhub.vn"}),e.jsx("div",{className:"fb-title",children:t.ogTitle||t.seoTitle||"TiÃªu Ä‘á» bÃ i viáº¿t"}),e.jsx("div",{className:"fb-desc",children:t.ogDescription||t.metaDescription||"MÃ´ táº£ bÃ i viáº¿t..."})]})]})]})]}),ot=({searchIntent:t,onChange:n})=>{const c=[{value:"informational",label:"ThÃ´ng tin (Informational)",icon:"ğŸ“š",desc:"NgÆ°á»i dÃ¹ng muá»‘n tÃ¬m hiá»ƒu, há»c há»i",cta:"Äá»c thÃªm, TÃ¬m hiá»ƒu thÃªm"},{value:"navigational",label:"Äiá»u hÆ°á»›ng (Navigational)",icon:"ğŸ§­",desc:"NgÆ°á»i dÃ¹ng muá»‘n tÃ¬m trang/nguá»“n cá»¥ thá»ƒ",cta:"Truy cáº­p, Äáº¿n trang"},{value:"transactional",label:"Giao dá»‹ch (Transactional)",icon:"ğŸ’³",desc:"NgÆ°á»i dÃ¹ng muá»‘n mua/Ä‘Äƒng kÃ½",cta:"Mua ngay, ÄÄƒng kÃ½"},{value:"commercial",label:"ThÆ°Æ¡ng máº¡i (Commercial)",icon:"ğŸ”",desc:"NgÆ°á»i dÃ¹ng so sÃ¡nh trÆ°á»›c khi mua",cta:"So sÃ¡nh, Xem Ä‘Ã¡nh giÃ¡"}];return e.jsxs("div",{className:"seo-intent-tab",children:[e.jsx("p",{className:"intent-intro",children:"Chá»n search intent phÃ¹ há»£p Ä‘á»ƒ tá»‘i Æ°u cáº¥u trÃºc ná»™i dung"}),e.jsx("div",{className:"intent-options",children:c.map(o=>e.jsxs("div",{className:`intent-option ${t===o.value?"selected":""}`,onClick:()=>n(o.value),children:[e.jsx("div",{className:"intent-icon",children:o.icon}),e.jsxs("div",{className:"intent-info",children:[e.jsx("div",{className:"intent-label",children:o.label}),e.jsx("div",{className:"intent-desc",children:o.desc}),e.jsxs("div",{className:"intent-cta",children:["CTA gá»£i Ã½: ",o.cta]})]})]},o.value))})]})},dt=({primaryKeyword:t,title:n,content:c,contentJson:o})=>{const r=N.useMemo(()=>{if(!t)return{hasKeyword:!1,checks:[]};const h=t.toLowerCase().trim(),m=Re(c||""),b=m.toLowerCase(),l=Ae(o,2),x=(n==null?void 0:n.toLowerCase())||"",u=m.split(/\s+/).filter(Boolean).length,v=(b.match(new RegExp(h,"gi"))||[]).length,j=u>0?v/u:0,f=[{id:"first150",label:"Keyword trong 150 kÃ½ tá»± Ä‘áº§u",passed:b.substring(0,150).includes(h),priority:"high"},{id:"last150",label:"Keyword trong 150 kÃ½ tá»± cuá»‘i",passed:b.slice(-150).includes(h),priority:"medium"},{id:"h1",label:"Keyword trong H1 (tiÃªu Ä‘á»)",passed:x.includes(h),priority:"high"},{id:"h2",label:"Keyword trong Ã­t nháº¥t 1 H2",passed:l.some(g=>g.toLowerCase().includes(h)),priority:"high"},{id:"density",label:`Máº­t Ä‘á»™ keyword: ${(j*100).toFixed(1)}%`,passed:j<=.03&&j>=.005,warning:j>.03,priority:"medium",hint:j>.03?"QuÃ¡ dÃ y! NÃªn < 3%":j<.005?"QuÃ¡ thÆ°a! NÃªn 0.5-3%":""}];return{hasKeyword:!0,keyword:h,keywordCount:v,wordCount:u,density:j,checks:f}},[t,n,c,o]);if(!r.hasKeyword)return e.jsxs("div",{className:"keyword-analyzer empty",children:[e.jsx("h4",{children:"ğŸ”‘ Keyword Analysis"}),e.jsx("p",{className:"no-keyword",children:"ChÆ°a cÃ³ primary keyword"})]});const i=r.checks.filter(h=>h.passed).length,p=r.checks.length,s=Math.round(i/p*100);return e.jsxs("div",{className:"keyword-analyzer",children:[e.jsxs("div",{className:"analyzer-header",children:[e.jsx("h4",{children:"ğŸ”‘ Keyword Analysis"}),e.jsxs("div",{className:`keyword-score ${s>=70?"good":s>=40?"medium":"poor"}`,children:[s,"%"]})]}),e.jsxs("div",{className:"keyword-target",children:[e.jsx("span",{className:"label",children:"Target:"}),e.jsx("span",{className:"keyword",children:r.keyword}),e.jsxs("span",{className:"count",children:["(",r.keywordCount,"x trong ",r.wordCount," tá»«)"]})]}),e.jsx("div",{className:"keyword-checks",children:r.checks.map(h=>e.jsxs("div",{className:`check-item ${h.passed?"passed":"failed"} ${h.warning?"warning":""}`,children:[e.jsx("span",{className:"check-icon",children:h.passed?"âœ…":h.warning?"âš ï¸":"âŒ"}),e.jsx("span",{className:"check-label",children:h.label}),h.hint&&e.jsx("span",{className:"check-hint",children:h.hint})]},h.id))})]})},ht=({title:t,content:n,contentJson:c,primaryKeyword:o=""})=>{const r=N.useMemo(()=>{const m=Re(n||""),b=R(c,2),l=R(c,3),x=mt(c),v=pt(c).filter(g=>g.wordCount>100),j=m.split(/\s+/).filter(Boolean).length;return{checks:[{id:"singleH1",label:"Chá»‰ cÃ³ 1 H1 (tiÃªu Ä‘á» bÃ i)",passed:!x,hint:x?"KhÃ´ng nÃªn dÃ¹ng H1 trong ná»™i dung":"",priority:"high"},{id:"hasH2",label:`CÃ³ Ã­t nháº¥t 1 H2 (hiá»‡n cÃ³ ${b})`,passed:b>=1,priority:"high"},{id:"multipleH2",label:`CÃ³ Ã­t nháº¥t 3 sections H2 (hiá»‡n cÃ³ ${b})`,passed:b>=3,priority:"medium"},{id:"headingHierarchy",label:"KhÃ´ng bá» cáº¥p heading (H1â†’H2â†’H3)",passed:gt(c),priority:"high"},{id:"paragraphLength",label:`Paragraphs ngáº¯n (${v.length} quÃ¡ dÃ i)`,passed:v.length===0,hint:v.length>0?"NÃªn chia nhá» Ä‘oáº¡n > 100 tá»«":"",priority:"medium"},{id:"minWords",label:`Äá»™ dÃ i ná»™i dung (${j} tá»«)`,passed:j>=300,hint:j<300?"NÃªn cÃ³ Ã­t nháº¥t 300 tá»«":"",priority:"medium"}],wordCount:j,h2Count:b,h3Count:l}},[t,n,c]),i=N.useMemo(()=>{const m=[],b=(l,x=0)=>{var u,v;if(l){if(l.type==="heading"&&((u=l.attrs)!=null&&u.level)){const j=((v=l.content)==null?void 0:v.map(f=>f.text||"").join(""))||"";m.push({level:l.attrs.level,text:j})}l.content&&l.content.forEach(j=>b(j,x+1))}};return b(c),m},[c]),p=r.checks.filter(m=>m.passed).length,s=r.checks.length,h=Math.round(p/s*100);return e.jsxs("div",{className:"readability-checker",children:[e.jsxs("div",{className:"checker-header",children:[e.jsx("h4",{children:"ğŸ“– Readability"}),e.jsxs("div",{className:`readability-score ${h>=70?"good":h>=40?"medium":"poor"}`,children:[h,"%"]})]}),e.jsxs("div",{className:"readability-stats",children:[e.jsxs("span",{children:[r.wordCount," tá»«"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[r.h2Count," H2"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[r.h3Count," H3"]})]}),e.jsx("div",{className:"readability-checks",children:r.checks.map(m=>e.jsxs("div",{className:`check-item ${m.passed?"passed":"failed"}`,children:[e.jsx("span",{className:"check-icon",children:m.passed?"âœ…":"âŒ"}),e.jsx("span",{className:"check-label",children:m.label}),m.hint&&e.jsx("span",{className:"check-hint",children:m.hint})]},m.id))}),i.length>0&&e.jsxs("div",{className:"heading-overview",children:[e.jsxs("div",{className:"heading-overview-title",children:["Cáº¥u trÃºc Heading ",o&&e.jsx("span",{className:"keyword-indicator",children:"ğŸ”‘ = cÃ³ keyword"})]}),e.jsx("div",{className:"heading-list",children:i.map((m,b)=>{const l=o&&m.text.toLowerCase().includes(o.toLowerCase());return e.jsxs("div",{className:`heading-item h${m.level} ${l?"has-keyword":""}`,children:[e.jsxs("span",{className:"h-level",children:["H",m.level]}),e.jsx("span",{className:"h-text",children:m.text||"(trá»‘ng)"}),l&&e.jsx("span",{className:"keyword-badge",children:"ğŸ”‘"})]},b)})})]})]})},ut=({seoData:t,keywords:n,title:c,slug:o,content:r,contentJson:i,images:p,author:s,onNavigate:h})=>{const m=N.useMemo(()=>{const u=R(i,2),v=(p==null?void 0:p.filter(j=>!j.alt||j.alt.trim()===""))||[];return[{id:"seoTitle",label:"SEO Title",passed:(t==null?void 0:t.seoTitle)&&t.seoTitle.length>=30,blocking:!0,tab:"meta",field:"seoTitle",hint:t!=null&&t.seoTitle?t.seoTitle.length<30?`Tá»‘i thiá»ƒu 30 kÃ½ tá»± (hiá»‡n cÃ³ ${t.seoTitle.length})`:"":"Nháº¥n Ä‘á»ƒ nháº­p"},{id:"metaDesc",label:"Meta Description",passed:(t==null?void 0:t.metaDescription)&&t.metaDescription.length>=120,blocking:!0,tab:"meta",field:"metaDescription",hint:t!=null&&t.metaDescription?t.metaDescription.length<120?`Tá»‘i thiá»ƒu 120 kÃ½ tá»± (hiá»‡n cÃ³ ${t.metaDescription.length})`:"":"Nháº¥n Ä‘á»ƒ nháº­p"},{id:"primaryKeyword",label:"Primary Keyword",passed:(n==null?void 0:n.primaryKeyword)&&n.primaryKeyword.trim()!=="",blocking:!0,tab:"keywords",field:"primaryKeyword",hint:n!=null&&n.primaryKeyword?"":"Nháº¥n Ä‘á»ƒ nháº­p"},{id:"hasH2",label:"CÃ³ Ã­t nháº¥t 1 H2",passed:u>=1,blocking:!0,navigable:!1,hint:u===0?"ThÃªm heading H2 vÃ o ná»™i dung":""},{id:"slug",label:"URL Slug",passed:o&&o.trim()!=="",blocking:!0,scrollTo:".slug-section",hint:o?"":"Nháº¥n Ä‘á»ƒ nháº­p"},{id:"title",label:"TiÃªu Ä‘á» bÃ i viáº¿t",passed:c&&c.trim()!=="",blocking:!0,scrollTo:".title-section",hint:c?"":"Nháº¥n Ä‘á»ƒ nháº­p"},{id:"imageAlt",label:"áº¢nh cÃ³ Alt text",passed:(p==null?void 0:p.length)>0&&v.length===0,blocking:!1,navigable:!1,hint:(p==null?void 0:p.length)===0?"ChÆ°a cÃ³ áº£nh trong bÃ i viáº¿t":v.length>0?`${v.length} áº£nh thiáº¿u alt`:""},{id:"author",label:"TÃ¡c giáº£",passed:s&&s.name,blocking:!1,navigable:!1}]},[t,n,c,o,r,i,p,s]),b=u=>{if(!u.passed){if(u.tab&&u.field&&h){h(u.tab,u.field);return}if(u.scrollTo){const v=document.querySelector(u.scrollTo);if(v){v.scrollIntoView({behavior:"smooth",block:"center"});const j=v.querySelector("input, textarea");j&&setTimeout(()=>j.focus(),300)}return}}},l=m.filter(u=>u.blocking).every(u=>u.passed),x=m.filter(u=>u.passed).length;return e.jsxs("div",{className:"publish-checklist",children:[e.jsxs("div",{className:"checklist-header",children:[e.jsx("h4",{children:"ğŸ“‹ Pre-Publish Checklist"}),e.jsx("span",{className:`checklist-status ${l?"ready":"not-ready"}`,children:l?"âœ… Ready":`âŒ ${m.filter(u=>u.blocking&&!u.passed).length} lá»—i`})]}),e.jsx("div",{className:"checklist-items",children:m.map(u=>{const v=!u.passed&&(u.tab||u.scrollTo)&&u.navigable!==!1;return e.jsxs("div",{className:`checklist-item ${u.passed?"passed":"failed"} ${v?"clickable":""}`,onClick:()=>v&&b(u),title:v?"Nháº¥n Ä‘á»ƒ Ä‘iá»n thÃ´ng tin":"",children:[e.jsx("span",{className:"checklist-icon",children:u.passed?"âœ…":u.blocking?"âŒ":"âš ï¸"}),e.jsxs("span",{className:"checklist-label",children:[u.label,u.blocking&&!u.passed&&e.jsx("span",{className:"blocking-badge",children:"Báº¯t buá»™c"})]}),v&&e.jsx("span",{className:"checklist-action",children:"âœï¸ Nháº­p"}),u.hint&&e.jsx("span",{className:"checklist-hint",children:u.hint})]},u.id)})}),e.jsxs("div",{className:"checklist-summary",children:[x,"/",m.length," hoÃ n thÃ nh"]}),!l&&e.jsx("div",{className:"checklist-help",children:"ğŸ’¡ Click vÃ o cÃ¡c má»¥c Ä‘á» Ä‘á»ƒ Ä‘iá»n thÃ´ng tin trá»±c tiáº¿p"})]})};function Re(t){if(!t||typeof t!="string")return"";const n=document.createElement("div");return n.innerHTML=t,(n.textContent||n.innerText||"").trim()}function Ae(t,n){const c=[];if(!t||!t.content)return c;function o(r){var i,p;if(r.type==="heading"&&((i=r.attrs)==null?void 0:i.level)===n){const s=((p=r.content)==null?void 0:p.map(h=>h.text||"").join(""))||"";c.push(s)}r.content&&r.content.forEach(o)}return o(t),c}function R(t,n){return Ae(t,n).length}function mt(t){if(!t||!t.content)return!1;function n(c){var o;return c.type==="heading"&&((o=c.attrs)==null?void 0:o.level)===1?!0:c.content?c.content.some(n):!1}return n(t)}function gt(t){if(!t||!t.content)return!0;let n=1,c=!0;function o(r){var i;if(r.type==="heading"&&((i=r.attrs)!=null&&i.level)){const p=r.attrs.level;p>n+1&&(c=!1),n=p}r.content&&c&&r.content.forEach(o)}return o(t),c}function pt(t){const n=[];if(!t||!t.content)return n;function c(o){var r;if(o.type==="paragraph"){const i=((r=o.content)==null?void 0:r.map(s=>s.text||"").join(""))||"",p=i.split(/\s+/).filter(Boolean).length;n.push({text:i,wordCount:p})}o.content&&o.content.forEach(c)}return c(t),n}const xt=({searchIntent:t="informational",primaryKeyword:n="",onOutlineChange:c,existingOutline:o=[]})=>{const[r,i]=N.useState(o),[p,s]=N.useState({level:"h2",text:""}),[h,m]=N.useState(!0),b=Ee[t],l=N.useMemo(()=>{const g={informational:[{level:"h2",text:"Giá»›i thiá»‡u vá» [topic]"},{level:"h2",text:"[Topic] lÃ  gÃ¬?"},{level:"h3",text:"Äá»‹nh nghÄ©a"},{level:"h3",text:"Lá»‹ch sá»­ phÃ¡t triá»ƒn"},{level:"h2",text:"Táº¡i sao [topic] quan trá»ng?"},{level:"h2",text:"CÃ¡ch thá»±c hiá»‡n [topic]"},{level:"h3",text:"BÆ°á»›c 1: ..."},{level:"h3",text:"BÆ°á»›c 2: ..."},{level:"h3",text:"BÆ°á»›c 3: ..."},{level:"h2",text:"Lá»i khuyÃªn vÃ  máº¹o hay"},{level:"h2",text:"CÃ¢u há»i thÆ°á»ng gáº·p (FAQ)"},{level:"h2",text:"Káº¿t luáº­n"}],transactional:[{level:"h2",text:"Tá»•ng quan sáº£n pháº©m"},{level:"h2",text:"TÃ­nh nÄƒng ná»•i báº­t"},{level:"h3",text:"TÃ­nh nÄƒng 1"},{level:"h3",text:"TÃ­nh nÄƒng 2"},{level:"h2",text:"Báº£ng giÃ¡"},{level:"h2",text:"So sÃ¡nh vá»›i Ä‘á»‘i thá»§"},{level:"h2",text:"ÄÃ¡nh giÃ¡ tá»« ngÆ°á»i dÃ¹ng"},{level:"h2",text:"HÆ°á»›ng dáº«n mua hÃ ng"}],commercial:[{level:"h2",text:"Top [n] sáº£n pháº©m tá»‘t nháº¥t"},{level:"h2",text:"#1. [Sáº£n pháº©m A]"},{level:"h3",text:"Æ¯u Ä‘iá»ƒm"},{level:"h3",text:"NhÆ°á»£c Ä‘iá»ƒm"},{level:"h3",text:"Ai nÃªn mua?"},{level:"h2",text:"#2. [Sáº£n pháº©m B]"},{level:"h2",text:"Báº£ng so sÃ¡nh chi tiáº¿t"},{level:"h2",text:"HÆ°á»›ng dáº«n chá»n mua"},{level:"h2",text:"Káº¿t luáº­n - NÃªn mua gÃ¬?"}],navigational:[{level:"h2",text:"ThÃ´ng tin nhanh"},{level:"h2",text:"CÃ¡ch truy cáº­p"},{level:"h2",text:"HÆ°á»›ng dáº«n sá»­ dá»¥ng"}]};return g[t]||g.informational},[t]),x=()=>{if(p.text.trim()){const g=[...r,{...p,id:Date.now()}];i(g),s({level:"h2",text:""}),c==null||c(g)}},u=g=>{const w=r.filter(k=>k.id!==g);i(w),c==null||c(w)},v=(g,w)=>{const k=w==="up"?g-1:g+1;if(k<0||k>=r.length)return;const C=[...r];[C[g],C[k]]=[C[k],C[g]],i(C),c==null||c(C)},j=()=>{const g=n||"topic",w=l.map((k,C)=>({...k,id:Date.now()+C,text:k.text.replace(/\[topic\]/gi,g)}));i(w),c==null||c(w)},f=N.useMemo(()=>{const g=[],w=r.filter(k=>k.level==="h2").length;return w<3&&g.push({type:"warning",message:`NÃªn cÃ³ Ã­t nháº¥t 3 H2 (hiá»‡n cÃ³ ${w})`}),r.length===0&&g.push({type:"error",message:"ChÆ°a cÃ³ dÃ n Ã½ nÃ o"}),n&&r.filter(C=>C.level==="h2"&&C.text.toLowerCase().includes(n.toLowerCase())).length===0&&g.push({type:"warning",message:"NÃªn cÃ³ Ã­t nháº¥t 1 H2 chá»©a keyword"}),g},[r,n]);return e.jsxs("div",{className:"outline-builder",children:[e.jsxs("div",{className:"outline-header",onClick:()=>m(!h),children:[e.jsxs("div",{className:"outline-title",children:[e.jsx("span",{className:"outline-icon",children:"ğŸ“"}),e.jsxs("h4",{children:["DÃ n Ã½ bÃ i viáº¿t (",r.length," má»¥c)"]})]}),e.jsx("button",{type:"button",className:"expand-btn",children:h?"â–¼":"â–¶"})]}),h&&e.jsxs("div",{className:"outline-content",children:[b&&e.jsxs("div",{className:"intent-suggestion-box",children:[e.jsx("span",{className:"intent-label",children:b.label}),e.jsx("button",{type:"button",className:"apply-template-btn",onClick:j,children:"ğŸ“‹ Ãp dá»¥ng máº«u"})]}),f.length>0&&e.jsx("div",{className:"outline-issues",children:f.map((g,w)=>e.jsxs("div",{className:`issue-item ${g.type}`,children:[g.type==="error"?"âŒ":"âš ï¸"," ",g.message]},w))}),e.jsx("div",{className:"outline-items",children:r.map((g,w)=>e.jsxs("div",{className:`outline-item ${g.level} ${n&&g.text.toLowerCase().includes(n.toLowerCase())?"has-keyword":""}`,children:[e.jsx("span",{className:"item-level",children:g.level.toUpperCase()}),e.jsx("span",{className:"item-text",children:g.text}),n&&g.text.toLowerCase().includes(n.toLowerCase())&&e.jsx("span",{className:"keyword-badge",children:"ğŸ”‘"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{type:"button",onClick:()=>v(w,"up"),disabled:w===0,children:"â†‘"}),e.jsx("button",{type:"button",onClick:()=>v(w,"down"),disabled:w===r.length-1,children:"â†“"}),e.jsx("button",{type:"button",onClick:()=>u(g.id),className:"remove-btn",children:"âœ•"})]})]},g.id))}),e.jsxs("div",{className:"add-outline-item",children:[e.jsxs("select",{value:p.level,onChange:g=>s({...p,level:g.target.value}),className:"level-select",children:[e.jsx("option",{value:"h2",children:"H2"}),e.jsx("option",{value:"h3",children:"H3"}),e.jsx("option",{value:"h4",children:"H4"})]}),e.jsx("input",{type:"text",value:p.text,onChange:g=>s({...p,text:g.target.value}),placeholder:"Nháº­p tiÃªu Ä‘á» heading...",className:"item-input",onKeyPress:g=>g.key==="Enter"&&x()}),e.jsx("button",{type:"button",onClick:x,className:"add-btn",children:"+ ThÃªm"})]})]})]})},vt=({title:t="",content:n="",contentJson:c=null,seoData:o={},keywords:r={},images:i=[],wordCount:p=0})=>{const s=N.useMemo(()=>{var w;const l=[],x=((w=r==null?void 0:r.primaryKeyword)==null?void 0:w.toLowerCase())||"",u=bt(n).toLowerCase();if(t&&x&&(t.toLowerCase().includes(x)||l.push({id:"title-keyword",type:"high",icon:"ğŸ“Œ",message:`ThÃªm keyword "${r.primaryKeyword}" vÃ o tiÃªu Ä‘á»`,action:"Keyword trong tiÃªu Ä‘á» giÃºp Google hiá»ƒu chá»§ Ä‘á» chÃ­nh"}),t.length>60&&l.push({id:"title-length",type:"medium",icon:"âœ‚ï¸",message:"TiÃªu Ä‘á» quÃ¡ dÃ i - cÃ³ thá»ƒ bá»‹ cáº¯t trÃªn Google",action:`RÃºt gá»n cÃ²n dÆ°á»›i 60 kÃ½ tá»± (hiá»‡n ${t.length})`})),p<300?l.push({id:"word-count-low",type:"high",icon:"ğŸ“",message:"Ná»™i dung quÃ¡ ngáº¯n cho SEO",action:`Viáº¿t thÃªm Ã­t nháº¥t ${300-p} tá»« ná»¯a (Ä‘á» xuáº¥t 1000-2000 tá»«)`}):p<800&&l.push({id:"word-count-medium",type:"low",icon:"ğŸ“–",message:"Ná»™i dung cÃ³ thá»ƒ má»Ÿ rá»™ng thÃªm",action:"BÃ i 1000-2000 tá»« thÆ°á»ng xáº¿p háº¡ng tá»‘t hÆ¡n"}),x){const k=(u.match(new RegExp(x,"gi"))||[]).length;k===0?l.push({id:"no-keyword",type:"high",icon:"ğŸ”‘",message:"Keyword chÆ°a xuáº¥t hiá»‡n trong ná»™i dung!",action:"ThÃªm keyword tá»± nhiÃªn vÃ o bÃ i viáº¿t"}):k<3&&l.push({id:"few-keywords",type:"medium",icon:"ğŸ”‘",message:`Keyword chá»‰ xuáº¥t hiá»‡n ${k} láº§n`,action:"Äá» xuáº¥t 5-10 láº§n cho bÃ i 1000 tá»«"})}const v=Ie(c,2),j=Ie(c,3);if(v<2&&l.push({id:"few-h2",type:"medium",icon:"ğŸ·ï¸",message:`Chá»‰ cÃ³ ${v} heading H2`,action:"ThÃªm H2 Ä‘á»ƒ chia bÃ i thÃ nh cÃ¡c pháº§n rÃµ rÃ ng"}),v>=3&&j===0&&l.push({id:"no-h3",type:"low",icon:"ğŸ“‘",message:"ChÆ°a cÃ³ H3 Ä‘á»ƒ chia nhá» cÃ¡c má»¥c",action:"ThÃªm H3 dÆ°á»›i má»—i H2 Ä‘á»ƒ cáº¥u trÃºc rÃµ rÃ ng hÆ¡n"}),i.length===0)l.push({id:"no-images",type:"medium",icon:"ğŸ–¼ï¸",message:"BÃ i viáº¿t chÆ°a cÃ³ hÃ¬nh áº£nh",action:"ThÃªm Ã­t nháº¥t 1-3 hÃ¬nh áº£nh minh há»a"});else{const k=i.filter(C=>!C.alt||C.alt.trim()==="");k.length>0&&l.push({id:"missing-alt",type:"medium",icon:"ğŸ·ï¸",message:`${k.length} áº£nh thiáº¿u Alt text`,action:"ThÃªm mÃ´ táº£ Alt cho táº¥t cáº£ áº£nh"})}(!(o!=null&&o.metaDescription)||o.metaDescription.length<50)&&l.push({id:"meta-desc",type:"high",icon:"ğŸ“‹",message:"Meta Description chÆ°a Ä‘á»§",action:"Viáº¿t mÃ´ táº£ háº¥p dáº«n 120-155 kÃ½ tá»±"}),(n.match(/<a /gi)||[]).length===0&&l.push({id:"no-links",type:"low",icon:"ğŸ”—",message:"ChÆ°a cÃ³ link trong bÃ i",action:"ThÃªm link internal Ä‘áº¿n bÃ i viáº¿t khÃ¡c"});const g=yt(c);return x&&g&&!g.toLowerCase().includes(x)&&l.push({id:"first-para-keyword",type:"medium",icon:"ğŸ¯",message:"Keyword chÆ°a cÃ³ trong Ä‘oáº¡n má»Ÿ Ä‘áº§u",action:"Äá» cáº­p keyword trong 100 tá»« Ä‘áº§u tiÃªn"}),l},[t,n,c,o,r,i,p]),h=s.filter(l=>l.type==="high"),m=s.filter(l=>l.type==="medium"),b=s.filter(l=>l.type==="low");return s.length===0?e.jsxs("div",{className:"content-optimizer perfect",children:[e.jsxs("div",{className:"optimizer-header",children:[e.jsx("h4",{children:"ğŸ‰ Content Optimizer"}),e.jsx("span",{className:"perfect-badge",children:"Tuyá»‡t vá»i!"})]}),e.jsx("p",{className:"no-suggestions",children:"KhÃ´ng cÃ³ Ä‘á» xuáº¥t cáº£i thiá»‡n. BÃ i viáº¿t Ä‘Ã£ tá»‘i Æ°u tá»‘t!"})]}):e.jsxs("div",{className:"content-optimizer",children:[e.jsxs("div",{className:"optimizer-header",children:[e.jsx("h4",{children:"ğŸ’¡ Content Optimizer"}),e.jsxs("span",{className:"suggestions-count",children:[s.length," Ä‘á» xuáº¥t"]})]}),h.length>0&&e.jsxs("div",{className:"suggestion-group high",children:[e.jsx("div",{className:"group-label",children:"Æ¯u tiÃªn cao"}),h.map(l=>e.jsx(E,{suggestion:l},l.id))]}),m.length>0&&e.jsxs("div",{className:"suggestion-group medium",children:[e.jsx("div",{className:"group-label",children:"NÃªn xem xÃ©t"}),m.map(l=>e.jsx(E,{suggestion:l},l.id))]}),b.length>0&&e.jsxs("div",{className:"suggestion-group low",children:[e.jsx("div",{className:"group-label",children:"TÃ¹y chá»n"}),b.map(l=>e.jsx(E,{suggestion:l},l.id))]})]})},E=({suggestion:t})=>e.jsxs("div",{className:`suggestion-item ${t.type}`,children:[e.jsx("span",{className:"suggestion-icon",children:t.icon}),e.jsxs("div",{className:"suggestion-content",children:[e.jsx("div",{className:"suggestion-message",children:t.message}),e.jsx("div",{className:"suggestion-action",children:t.action})]})]}),bt=t=>{const n=document.createElement("div");return n.innerHTML=t,n.textContent||n.innerText||""},Ie=(t,n)=>{if(!t)return 0;let c=0;const o=r=>{var i;r.type==="heading"&&((i=r.attrs)==null?void 0:i.level)===n&&c++,r.content&&r.content.forEach(o)};return o(t),c},yt=t=>{if(!(t!=null&&t.content))return"";for(const n of t.content)if(n.type==="paragraph"&&n.content)return n.content.map(c=>c.text||"").join("");return""},Ht=()=>{var B,F,U,P,q,z,G,O,V,_,Q,W,Y,X,D,Z,J,ee,te,se,ne,ie,le,ae,ce,re,oe,de,he,ue,me,ge,pe,xe,ve,be,ye,je,Ne,fe,we,ke,Ce,Te,Se,Ke,He,Le;const{id:t}=Je(),n=et(),{addBlog:c,updateBlog:o,blogs:r,currentUser:i}=tt(),p=!!t,[s,h]=N.useState({...K,author:i?{id:i.id,name:i.displayName||"Anonymous",bio:"",expertise:"",avatar:i.photoURL||""}:null}),[m,b]=N.useState(!1),[l,x]=N.useState(!1),[u,v]=N.useState(null),[j,f]=N.useState([]),g=N.useRef(null);N.useEffect(()=>{if(p&&r.length>0){const a=r.find(d=>d.id===t);a?(h({...K,...a,seo:{...K.seo,...a.seo},keywords:{...K.keywords,...a.keywords},schema:{...K.schema,...a.schema}}),a.content&&typeof a.content=="object"&&v(a.content)):(alert("KhÃ´ng tÃ¬m tháº¥y bÃ i viáº¿t!"),n("/blog"))}},[p,t,r,n]),N.useEffect(()=>{i&&!s.author&&h(a=>({...a,author:{id:i.id,name:i.displayName||"Anonymous",bio:"",expertise:"",avatar:i.photoURL||""}}))},[i,s.author]);const w=N.useCallback(a=>{h(d=>{const y=d.slug===H(d.title)||!d.slug?H(a):d.slug;return{...d,title:a,slug:y}})},[]),k=N.useCallback(({json:a,html:d})=>{v(a),h(T=>({...T,content:a,contentHtml:d}));const y=jt(a);f(y)},[]),C=N.useCallback(a=>{f(d=>[...d,a])},[]),L=N.useCallback(a=>{h(d=>({...d,seo:a}))},[]),A=N.useCallback(a=>{h(d=>({...d,keywords:a}))},[]),Me=N.useCallback(a=>{h(d=>({...d,searchIntent:a}))},[]),Be=N.useCallback((a,d)=>{g.current&&(g.current.switchToTab(a),g.current.focusField(d))},[]),I=N.useMemo(()=>{const{seo:a,keywords:d,title:y,slug:T}=s,S=Nt(u,2);return a.seoTitle&&a.seoTitle.length>=30&&a.metaDescription&&a.metaDescription.length>=120&&d.primaryKeyword&&d.primaryKeyword.trim()!==""&&S>=1&&T&&T.trim()!==""&&y&&y.trim()!==""},[s,u]),Fe=async a=>{const d=a.target.files[0];if(d){if(!d.type.startsWith("image/")){alert("Vui lÃ²ng chá»n file áº£nh!");return}if(d.size>10*1024*1024){alert("File áº£nh quÃ¡ lá»›n (tá»‘i Ä‘a 10MB)");return}x(!0);try{const y=await $e(d,"blog-covers");h(T=>({...T,coverImage:y.url,seo:{...T.seo,ogImage:y.url}}))}catch(y){console.error("Upload failed:",y),alert(`Táº£i áº£nh tháº¥t báº¡i: ${y.message}`)}finally{x(!1),a.target.value=null}}},M=async(a="draft")=>{if(a==="published"&&!I){alert("Vui lÃ²ng hoÃ n thÃ nh táº¥t cáº£ yÃªu cáº§u SEO trÆ°á»›c khi Ä‘Äƒng!");return}b(!0);const d={...s,status:a,canonicalUrl:`https://deskhub.vn/blog/${s.slug}`,excerpt:s.excerpt||s.seo.metaDescription,coverImage:s.coverImage||s.seo.ogImage,readTime:ft(s.contentHtml)};try{if(p){const y=await o(t,d);y.success?(alert(a==="published"?"ÄÃ£ Ä‘Äƒng bÃ i thÃ nh cÃ´ng!":"ÄÃ£ lÆ°u nhÃ¡p!"),n(`/blog/${t}`)):alert(`Lá»—i: ${y.message}`)}else{const y=await c(d);y.success?(alert(a==="published"?"ÄÃ£ Ä‘Äƒng bÃ i thÃ nh cÃ´ng!":"ÄÃ£ lÆ°u nhÃ¡p!"),n("/blog")):alert(`Lá»—i: ${y.message}`)}}catch(y){console.error("Save error:",y),alert("CÃ³ lá»—i xáº£y ra khi lÆ°u bÃ i viáº¿t!")}finally{b(!1)}},$=Ee[s.searchIntent];return e.jsxs("div",{className:"seo-blog-editor",children:[e.jsxs("div",{className:"editor-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{type:"button",className:"back-btn",onClick:()=>n("/blog"),children:"â† Quay láº¡i"}),e.jsx("h1",{children:p?"Chá»‰nh Sá»­a BÃ i Viáº¿t":"Táº¡o BÃ i Viáº¿t Má»›i"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>M("draft"),disabled:m,children:m?"Äang lÆ°u...":"LÆ°u NhÃ¡p"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>M("published"),disabled:m||!I,title:I?"":"HoÃ n thÃ nh cÃ¡c yÃªu cáº§u SEO Ä‘á»ƒ Ä‘Äƒng bÃ i",children:m?"Äang Ä‘Äƒng...":"ÄÄƒng BÃ i"})]})]}),e.jsxs("div",{className:"editor-layout",children:[e.jsxs("div",{className:"editor-main",children:[e.jsxs("div",{className:"title-section",children:[e.jsx("input",{type:"text",value:s.title,onChange:a=>w(a.target.value),placeholder:"TiÃªu Ä‘á» bÃ i viáº¿t (H1)",className:"title-input",maxLength:100}),e.jsxs("div",{className:"title-meta",children:[e.jsxs("span",{children:[s.title.length,"/100 kÃ½ tá»±"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Slug: /",s.slug||"auto-generated"]})]})]}),e.jsxs("div",{className:"slug-section",children:[e.jsx("label",{children:"URL Slug:"}),e.jsxs("div",{className:"slug-input-wrapper",children:[e.jsx("span",{className:"slug-prefix",children:"deskhub.vn/blog/"}),e.jsx("input",{type:"text",value:s.slug,onChange:a=>h(d=>({...d,slug:H(a.target.value)})),placeholder:"url-bai-viet",className:"slug-input"})]}),p&&e.jsxs("details",{className:"redirects-details",children:[e.jsxs("summary",{children:["ğŸ”„ Quáº£n lÃ½ Redirect 301 (",(s.redirectsFrom||[]).length,")"]}),e.jsxs("div",{className:"redirects-content",children:[e.jsx("p",{className:"redirects-hint",children:"ThÃªm URL cÅ© Ä‘á»ƒ tá»± Ä‘á»™ng redirect vá» bÃ i viáº¿t nÃ y"}),(s.redirectsFrom||[]).map((a,d)=>e.jsxs("div",{className:"redirect-item",children:[e.jsxs("span",{className:"old-url",children:["/blog/",a]}),e.jsx("span",{className:"redirect-arrow",children:"â†’"}),e.jsxs("span",{className:"new-url",children:["/blog/",s.slug]}),e.jsx("button",{type:"button",className:"remove-redirect",onClick:()=>h(y=>({...y,redirectsFrom:y.redirectsFrom.filter((T,S)=>S!==d)})),children:"âœ•"})]},d)),e.jsxs("div",{className:"add-redirect",children:[e.jsx("input",{type:"text",id:"new-redirect-slug",placeholder:"old-url-slug",className:"redirect-input"}),e.jsx("button",{type:"button",className:"add-redirect-btn",onClick:()=>{const a=document.getElementById("new-redirect-slug");a.value.trim()&&(h(d=>({...d,redirectsFrom:[...d.redirectsFrom||[],H(a.value.trim())]})),a.value="")},children:"+ ThÃªm"})]})]})]})]}),e.jsxs("div",{className:"essential-seo-section",children:[e.jsxs("div",{className:"essential-seo-header",children:[e.jsx("span",{className:"essential-seo-icon",children:"ğŸ¯"}),e.jsx("h3",{children:"ThÃ´ng tin SEO báº¯t buá»™c"})]}),e.jsxs("div",{className:"essential-seo-field",children:[e.jsxs("label",{htmlFor:"main-seo-title",children:["SEO Title ",e.jsx("span",{className:"required-star",children:"*"}),e.jsxs("span",{className:`field-counter ${(((F=(B=s.seo)==null?void 0:B.seoTitle)==null?void 0:F.length)||0)===0?"empty":(((P=(U=s.seo)==null?void 0:U.seoTitle)==null?void 0:P.length)||0)<30||(((z=(q=s.seo)==null?void 0:q.seoTitle)==null?void 0:z.length)||0)>60?"warning":"good"}`,children:[((O=(G=s.seo)==null?void 0:G.seoTitle)==null?void 0:O.length)||0,"/60"]})]}),e.jsx("input",{id:"main-seo-title",type:"text",value:((V=s.seo)==null?void 0:V.seoTitle)||"",onChange:a=>L({...s.seo,seoTitle:a.target.value}),placeholder:"TiÃªu Ä‘á» hiá»ƒn thá»‹ trÃªn Google (30-60 kÃ½ tá»±)",className:"essential-seo-input",maxLength:70}),(((Q=(_=s.seo)==null?void 0:_.seoTitle)==null?void 0:Q.length)||0)>0&&(((Y=(W=s.seo)==null?void 0:W.seoTitle)==null?void 0:Y.length)||0)<30&&e.jsx("span",{className:"field-hint warning",children:"âš ï¸ Cáº§n tá»‘i thiá»ƒu 30 kÃ½ tá»±"}),((X=s.keywords)==null?void 0:X.primaryKeyword)&&((D=s.seo)==null?void 0:D.seoTitle)&&!s.seo.seoTitle.toLowerCase().includes(s.keywords.primaryKeyword.toLowerCase())&&e.jsxs("span",{className:"field-hint warning",children:['âš ï¸ Keyword "',s.keywords.primaryKeyword,'" chÆ°a cÃ³ trong Title']}),((Z=s.keywords)==null?void 0:Z.primaryKeyword)&&((J=s.seo)==null?void 0:J.seoTitle)&&s.seo.seoTitle.toLowerCase().includes(s.keywords.primaryKeyword.toLowerCase())&&e.jsx("span",{className:"field-hint success",children:"âœ… Keyword cÃ³ trong Title"})]}),e.jsxs("div",{className:"essential-seo-field",children:[e.jsxs("label",{htmlFor:"main-meta-desc",children:["Meta Description ",e.jsx("span",{className:"required-star",children:"*"}),e.jsxs("span",{className:`field-counter ${(((te=(ee=s.seo)==null?void 0:ee.metaDescription)==null?void 0:te.length)||0)===0?"empty":(((ne=(se=s.seo)==null?void 0:se.metaDescription)==null?void 0:ne.length)||0)<120||(((le=(ie=s.seo)==null?void 0:ie.metaDescription)==null?void 0:le.length)||0)>155?"warning":"good"}`,children:[((ce=(ae=s.seo)==null?void 0:ae.metaDescription)==null?void 0:ce.length)||0,"/155"]})]}),e.jsx("textarea",{id:"main-meta-desc",value:((re=s.seo)==null?void 0:re.metaDescription)||"",onChange:a=>L({...s.seo,metaDescription:a.target.value}),placeholder:"MÃ´ táº£ ngáº¯n hiá»ƒn thá»‹ trÃªn káº¿t quáº£ tÃ¬m kiáº¿m (120-155 kÃ½ tá»±)",className:"essential-seo-input",rows:3,maxLength:160}),(((de=(oe=s.seo)==null?void 0:oe.metaDescription)==null?void 0:de.length)||0)>0&&(((ue=(he=s.seo)==null?void 0:he.metaDescription)==null?void 0:ue.length)||0)<120&&e.jsx("span",{className:"field-hint warning",children:"âš ï¸ Cáº§n tá»‘i thiá»ƒu 120 kÃ½ tá»±"}),((me=s.keywords)==null?void 0:me.primaryKeyword)&&((ge=s.seo)==null?void 0:ge.metaDescription)&&!s.seo.metaDescription.toLowerCase().includes(s.keywords.primaryKeyword.toLowerCase())&&e.jsxs("span",{className:"field-hint warning",children:['âš ï¸ Keyword "',s.keywords.primaryKeyword,'" chÆ°a cÃ³ trong Description']}),((pe=s.keywords)==null?void 0:pe.primaryKeyword)&&((xe=s.seo)==null?void 0:xe.metaDescription)&&s.seo.metaDescription.toLowerCase().includes(s.keywords.primaryKeyword.toLowerCase())&&e.jsx("span",{className:"field-hint success",children:"âœ… Keyword cÃ³ trong Description"})]}),e.jsxs("div",{className:"essential-seo-field",children:[e.jsxs("label",{htmlFor:"main-primary-keyword",children:["Primary Keyword ",e.jsx("span",{className:"required-star",children:"*"})]}),e.jsx("input",{id:"main-primary-keyword",type:"text",value:((ve=s.keywords)==null?void 0:ve.primaryKeyword)||"",onChange:a=>A({...s.keywords,primaryKeyword:a.target.value}),placeholder:"Tá»« khÃ³a chÃ­nh báº¡n muá»‘n xáº¿p háº¡ng trÃªn Google",className:"essential-seo-input"}),!((be=s.keywords)!=null&&be.primaryKeyword)&&e.jsx("span",{className:"field-hint error",children:"âŒ Báº¯t buá»™c nháº­p Primary Keyword"})]}),s.slug&&e.jsxs("div",{className:"seo-warnings-box",children:[e.jsx("div",{className:"warnings-header",children:"ğŸ“‹ Kiá»ƒm tra URL"}),e.jsxs("div",{className:"warnings-list",children:[s.slug.length>60?e.jsxs("div",{className:"warning-item error",children:["âŒ URL quÃ¡ dÃ i (",s.slug.length," kÃ½ tá»±). NÃªn dÆ°á»›i 60."]}):s.slug.length>50?e.jsxs("div",{className:"warning-item warning",children:["âš ï¸ URL hÆ¡i dÃ i (",s.slug.length," kÃ½ tá»±). NÃªn 30-50."]}):e.jsxs("div",{className:"warning-item success",children:["âœ… Äá»™ dÃ i URL tá»‘t (",s.slug.length," kÃ½ tá»±)"]}),((ye=s.keywords)==null?void 0:ye.primaryKeyword)&&(s.slug.toLowerCase().includes(s.keywords.primaryKeyword.toLowerCase().replace(/\s+/g,"-"))||s.slug.toLowerCase().includes(s.keywords.primaryKeyword.toLowerCase().replace(/\s+/g,""))?e.jsx("div",{className:"warning-item success",children:"âœ… URL chá»©a keyword"}):e.jsxs("div",{className:"warning-item warning",children:['âš ï¸ URL nÃªn chá»©a keyword "',s.keywords.primaryKeyword,'"']}))]})]})]}),$&&e.jsxs("div",{className:"intent-suggestion",children:[e.jsx("span",{className:"intent-badge",children:$.label}),e.jsxs("span",{className:"intent-hint",children:["Cáº¥u trÃºc Ä‘á» xuáº¥t: ",$.suggestedStructure.join(" â†’ ")]})]}),e.jsx(xt,{searchIntent:s.searchIntent,primaryKeyword:(je=s.keywords)==null?void 0:je.primaryKeyword,onOutlineChange:a=>h(d=>({...d,outline:a})),existingOutline:s.outline||[]}),e.jsx("div",{className:"content-section",children:e.jsx(lt,{content:u,onUpdate:k,onImageAdd:C,placeholder:"Báº¯t Ä‘áº§u viáº¿t ná»™i dung bÃ i viáº¿t...",primaryKeyword:(Ne=s.keywords)==null?void 0:Ne.primaryKeyword})}),e.jsxs("div",{className:"cover-section",children:[e.jsx("label",{children:"áº¢nh BÃ¬a / OG Image:"}),s.coverImage?e.jsxs("div",{className:"cover-preview-container",children:[e.jsx("img",{src:s.coverImage,className:"cover-preview-img",alt:"Cover"}),e.jsx("button",{className:"remove-cover-btn",onClick:()=>h(a=>({...a,coverImage:"",seo:{...a.seo,ogImage:""}})),children:"âœ• Gá»¡ áº£nh"})]}):e.jsxs("div",{className:"cover-upload-box",onClick:()=>document.getElementById("cover-upload").click(),children:[e.jsx("input",{id:"cover-upload",type:"file",accept:"image/*",onChange:Fe,style:{display:"none"},disabled:l}),e.jsx("div",{className:"upload-label",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"upload-icon",children:"â³"}),e.jsx("span",{children:"Äang táº£i áº£nh lÃªn..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"upload-icon",children:"ğŸ“¤"}),e.jsx("span",{children:"Nháº¥n Ä‘á»ƒ táº£i áº£nh lÃªn"}),e.jsx("small",{children:"(Max 5MB)"})]})})]}),e.jsxs("details",{className:"url-fallback",children:[e.jsx("summary",{children:"Hoáº·c nháº­p URL áº£nh thá»§ cÃ´ng"}),e.jsx("input",{type:"url",value:s.coverImage,onChange:a=>h(d=>({...d,coverImage:a.target.value,seo:{...d.seo,ogImage:a.target.value}})),placeholder:"https://example.com/cover.jpg",className:"cover-input",style:{marginTop:"8px"}})]})]}),e.jsxs("div",{className:"excerpt-section",children:[e.jsx("label",{children:"MÃ´ táº£ ngáº¯n (Excerpt):"}),e.jsx("textarea",{value:s.excerpt,onChange:a=>h(d=>({...d,excerpt:a.target.value})),placeholder:"MÃ´ táº£ ngáº¯n vá» bÃ i viáº¿t...",className:"excerpt-input",rows:3,maxLength:300})]}),e.jsxs("div",{className:"meta-section",children:[e.jsxs("div",{className:"meta-field",children:[e.jsx("label",{children:"Danh má»¥c:"}),e.jsxs("select",{value:s.category,onChange:a=>h(d=>({...d,category:a.target.value})),className:"meta-select",children:[e.jsx("option",{value:"HÆ°á»›ng Dáº«n",children:"HÆ°á»›ng Dáº«n"}),e.jsx("option",{value:"Thiáº¿t Káº¿",children:"Thiáº¿t Káº¿"}),e.jsx("option",{value:"ÄÃ¡nh GiÃ¡",children:"ÄÃ¡nh GiÃ¡"}),e.jsx("option",{value:"Xu HÆ°á»›ng",children:"Xu HÆ°á»›ng"}),e.jsx("option",{value:"Máº¹o",children:"Máº¹o"})]})]}),e.jsxs("div",{className:"meta-field",children:[e.jsx("label",{children:"Tags (phÃ¢n cÃ¡ch báº±ng dáº¥u pháº©y):"}),e.jsx("input",{type:"text",value:((fe=s.tags)==null?void 0:fe.join(", "))||"",onChange:a=>h(d=>({...d,tags:a.target.value.split(",").map(y=>y.trim()).filter(Boolean)})),placeholder:"desk setup, productivity, gaming",className:"meta-input"})]})]}),e.jsx("div",{className:"index-section",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:s.noIndex,onChange:a=>h(d=>({...d,noIndex:a.target.checked}))}),e.jsx("span",{children:"No Index (khÃ´ng cho Google index bÃ i nÃ y)"})]})}),e.jsxs("div",{className:"references-section",children:[e.jsxs("div",{className:"references-header",children:[e.jsx("span",{className:"references-icon",children:"ğŸ“š"}),e.jsx("h4",{children:"Nguá»“n tham kháº£o (E.E.A.T)"})]}),e.jsx("p",{className:"references-hint",children:"ThÃªm nguá»“n uy tÃ­n Ä‘á»ƒ tÄƒng Ä‘á»™ tin cáº­y cho bÃ i viáº¿t"}),e.jsx("div",{className:"references-list",children:(s.references||[]).map((a,d)=>e.jsxs("div",{className:"reference-item",children:[e.jsxs("div",{className:"reference-info",children:[e.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.title||a.url}),a.nofollow&&e.jsx("span",{className:"nofollow-badge",children:"nofollow"})]}),e.jsx("button",{type:"button",className:"remove-ref-btn",onClick:()=>{h(y=>({...y,references:y.references.filter((T,S)=>S!==d)}))},children:"âœ•"})]},d))}),e.jsxs("div",{className:"add-reference",children:[e.jsx("input",{type:"url",id:"new-ref-url",placeholder:"URL nguá»“n (https://...)",className:"ref-input"}),e.jsx("input",{type:"text",id:"new-ref-title",placeholder:"TiÃªu Ä‘á» nguá»“n",className:"ref-input"}),e.jsxs("div",{className:"ref-options",children:[e.jsxs("label",{className:"nofollow-toggle",children:[e.jsx("input",{type:"checkbox",id:"new-ref-nofollow"}),e.jsx("span",{children:"nofollow"})]}),e.jsx("button",{type:"button",className:"add-ref-btn",onClick:()=>{const a=document.getElementById("new-ref-url"),d=document.getElementById("new-ref-title"),y=document.getElementById("new-ref-nofollow");a.value.trim()&&(h(T=>({...T,references:[...T.references||[],{url:a.value.trim(),title:d.value.trim()||a.value.trim(),nofollow:y.checked}]})),a.value="",d.value="",y.checked=!1)},children:"+ ThÃªm nguá»“n"})]})]})]}),e.jsxs("div",{className:"schema-section",children:[e.jsxs("div",{className:"schema-header",children:[e.jsx("span",{className:"schema-icon",children:"ğŸ·ï¸"}),e.jsx("h4",{children:"Schema Markup (Rich Results)"})]}),e.jsx("p",{className:"schema-hint",children:"Báº­t schema Ä‘á»ƒ hiá»ƒn thá»‹ rich snippets trÃªn Google"}),e.jsxs("div",{className:"schema-toggles",children:[e.jsxs("div",{className:"schema-toggle-item enabled",children:[e.jsxs("div",{className:"toggle-info",children:[e.jsx("span",{className:"toggle-icon",children:"ğŸ“„"}),e.jsxs("div",{children:[e.jsx("span",{className:"toggle-name",children:"Article Schema"}),e.jsx("span",{className:"toggle-desc",children:"LuÃ´n báº­t cho táº¥t cáº£ bÃ i viáº¿t"})]})]}),e.jsx("span",{className:"toggle-status active",children:"âœ“ Active"})]}),e.jsxs("div",{className:"schema-toggle-item",children:[e.jsxs("div",{className:"toggle-info",children:[e.jsx("span",{className:"toggle-icon",children:"â“"}),e.jsxs("div",{children:[e.jsx("span",{className:"toggle-name",children:"FAQ Schema"}),e.jsx("span",{className:"toggle-desc",children:"Hiá»ƒn thá»‹ Q&A trÃªn káº¿t quáº£ tÃ¬m kiáº¿m"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:((we=s.schema)==null?void 0:we.enableFaqSchema)||!1,onChange:a=>h(d=>({...d,schema:{...d.schema,enableFaqSchema:a.target.checked}}))}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"schema-toggle-item",children:[e.jsxs("div",{className:"toggle-info",children:[e.jsx("span",{className:"toggle-icon",children:"â­"}),e.jsxs("div",{children:[e.jsx("span",{className:"toggle-name",children:"Review Schema"}),e.jsx("span",{className:"toggle-desc",children:"Hiá»ƒn thá»‹ Ä‘Ã¡nh giÃ¡ sao trÃªn Google"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:((ke=s.schema)==null?void 0:ke.enableReviewSchema)||!1,onChange:a=>h(d=>({...d,schema:{...d.schema,enableReviewSchema:a.target.checked}}))}),e.jsx("span",{className:"toggle-slider"})]})]}),((Ce=s.schema)==null?void 0:Ce.enableReviewSchema)&&e.jsxs("div",{className:"review-data-form",children:[e.jsxs("div",{className:"review-field",children:[e.jsx("label",{children:"TÃªn sáº£n pháº©m/dá»‹ch vá»¥ Ä‘Ã¡nh giÃ¡:"}),e.jsx("input",{type:"text",value:((Se=(Te=s.schema)==null?void 0:Te.reviewData)==null?void 0:Se.itemName)||"",onChange:a=>h(d=>{var y;return{...d,schema:{...d.schema,reviewData:{...(y=d.schema)==null?void 0:y.reviewData,itemName:a.target.value}}}}),placeholder:"VD: Dell UltraSharp U2723QE",className:"review-input"})]}),e.jsxs("div",{className:"review-field",children:[e.jsx("label",{children:"Äiá»ƒm Ä‘Ã¡nh giÃ¡ (1-5):"}),e.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:((He=(Ke=s.schema)==null?void 0:Ke.reviewData)==null?void 0:He.rating)||5,onChange:a=>h(d=>{var y;return{...d,schema:{...d.schema,reviewData:{...(y=d.schema)==null?void 0:y.reviewData,rating:parseFloat(a.target.value)}}}}),className:"review-input rating-input"})]})]})]})]})]}),e.jsxs("div",{className:"editor-sidebar",children:[e.jsx(at,{ref:g,seoData:s.seo,onChange:L,content:s.contentHtml,keywords:s.keywords,onKeywordsChange:A,searchIntent:s.searchIntent,onIntentChange:Me}),e.jsx(dt,{primaryKeyword:s.keywords.primaryKeyword,title:s.title,content:s.contentHtml,contentJson:u}),e.jsx(ht,{title:s.title,content:s.contentHtml,contentJson:u,primaryKeyword:(Le=s.keywords)==null?void 0:Le.primaryKeyword}),e.jsx(vt,{title:s.title,content:s.contentHtml,contentJson:u,seoData:s.seo,keywords:s.keywords,images:j,wordCount:s.contentHtml?s.contentHtml.replace(/<[^>]+>/g,"").split(/\s+/).filter(Boolean).length:0}),e.jsx(ut,{seoData:s.seo,keywords:s.keywords,title:s.title,slug:s.slug,content:s.contentHtml,contentJson:u,images:j,author:s.author,onNavigate:Be})]})]})]})};function jt(t){const n=[];if(!t||!t.content)return n;function c(o){var r,i;o.type==="image"&&n.push({url:(r=o.attrs)==null?void 0:r.src,alt:((i=o.attrs)==null?void 0:i.alt)||""}),o.content&&o.content.forEach(c)}return c(t),n}function Nt(t,n){let c=0;if(!t||!t.content)return c;function o(r){var i;r.type==="heading"&&((i=r.attrs)==null?void 0:i.level)===n&&c++,r.content&&r.content.forEach(o)}return o(t),c}function ft(t){if(!t)return 5;const n=document.createElement("div");n.innerHTML=t;const o=(n.textContent||"").split(/\s+/).filter(Boolean).length;return Math.max(1,Math.ceil(o/200))}export{Ht as default};
